import{_ as e,c as t,o as a,a as s}from"./app.003fc4e4.js";const k='{"title":"Setup","description":"","frontmatter":{},"headers":[{"level":2,"title":"Auth Drivers","slug":"auth-drivers"},{"level":2,"title":"HTTP Drivers","slug":"http-drivers"},{"level":2,"title":"Router Drivers [Deleted!]","slug":"router-drivers-deleted"},{"level":2,"title":"OAuth2 Drivers","slug":"oauth2-drivers"},{"level":2,"title":"Custom Drivers","slug":"custom-drivers"}],"relativePath":"guide/drivers.md","lastUpdated":1655467979000}',n={},r=s(`<p>The plugin is made to re-use and integrate with existing vue plugins as much as possible.</p><p>For this reason it ships with a driver model which includes four driver types.</p><h1 id="setup" tabindex="-1">Setup <a class="header-anchor" href="#setup" aria-hidden="true">#</a></h1><p>A typical setup might look like the following.</p><div class="language-ts"><pre><code><span class="token keyword">import</span> <span class="token punctuation">{</span> createAuth <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue-auth3&quot;</span>
<span class="token keyword">import</span> router <span class="token keyword">from</span> <span class="token string">&quot;./router&quot;</span>

<span class="token keyword">import</span> driverAuthBasic <span class="token keyword">from</span> <span class="token string">&quot;vue-auth3/dist/drivers/auth/basic&quot;</span>
<span class="token keyword">import</span> driverHttpAxios <span class="token keyword">from</span> <span class="token string">&quot;vue-auth3/dist/drivers/http/axios&quot;</span>
<span class="token comment">// import driverOAuth2FaB from &quot;vue-auth3/dist/oauth2/facebook&quot;</span>
<span class="token comment">// import driverOAuth2Goo from &quot;vue-auth3/dist/oauth2/google&quot;</span>

<span class="token keyword">const</span> auth <span class="token operator">=</span> <span class="token function">createAuth</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">{</span>
    router<span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  drivers<span class="token operator">:</span> <span class="token punctuation">{</span>
    auth<span class="token operator">:</span> driverAuthBasic<span class="token punctuation">,</span> <span class="token comment">// required</span>
    http<span class="token operator">:</span> driverHttpAxios<span class="token punctuation">,</span> <span class="token comment">// required</span>
    <span class="token comment">// oauth2: {</span>
    <span class="token comment">// facebook: driverOAuth2FaB,</span>
    <span class="token comment">// google: driverOAuth2Goo</span>
    <span class="token comment">// }</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h2 id="auth-drivers" tabindex="-1">Auth Drivers <a class="header-anchor" href="#auth-drivers" aria-hidden="true">#</a></h2><p>This driver is used to parse a token from a response and format a token for a request.</p><p>In it you will find the two functions aptly named <code>request</code> and <code>response</code>.</p><p>For instance, if I take the simplest case of the <a href="https://github.com/tachibana-shin/vue-auth3/blob/master/src/drivers/auth/basic.ts" target="_blank" rel="noopener noreferrer">basic.ts</a> driver, I can see it&#39;s simply setting and returning a token with no other modifications.</p><div class="tip custom-block"><p class="custom-block-title">Driver for cross-domain</p><p>If your app requires <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/CORS" target="_blank" rel="noopener noreferrer">cross-domain</a> use the <code>bearer-token</code> . driver</p></div><h4 id="available-drivers" tabindex="-1">Available Drivers <a class="header-anchor" href="#available-drivers" aria-hidden="true">#</a></h4><ul><li><a href="https://github.com/tachibana-shin/vue-auth3/blob/master/src/drivers/auth/basic.ts" target="_blank" rel="noopener noreferrer">basic.ts</a></li><li><a href="https://github.com/tachibana-shin/vue-auth3/blob/master/src/drivers/auth/bearer.ts" target="_blank" rel="noopener noreferrer">bearer.ts</a></li><li><a href="https://github.com/tachibana-shin/vue-auth3/blob/master/src/drivers/auth/bearer-token.ts" target="_blank" rel="noopener noreferrer">bearer-token.ts</a>: Same as bearer.ts but instead of getting token at <code>headers.Authorization</code> it will get token at <code>data.token</code> suitable for cross-domain</li><li><a href="https://github.com/tachibana-shin/vue-auth3/blob/master/src/drivers/auth/devise.ts" target="_blank" rel="noopener noreferrer">devise.ts</a></li></ul><h2 id="http-drivers" tabindex="-1">HTTP Drivers <a class="header-anchor" href="#http-drivers" aria-hidden="true">#</a></h2><p>This driver has three main purposes.</p><h4 id="_1-make-http-requests-to-our-api" tabindex="-1">1. Make HTTP requests to our API. <a class="header-anchor" href="#_1-make-http-requests-to-our-api" aria-hidden="true">#</a></h4><p>No need to add additional code for something that already exists and works fine. So I decided to create an <code>HTTP Driver for axios</code> instead of dynamically importing the whole <code>axios</code> inside.</p><div class="info custom-block"><p class="custom-block-title">Options</p><p>It&#39;s important to note that all VueAuth3 action functions accept a <code>options</code> which, except for a few features of that function, will accept all options of <a href="https://github.com/axiosjs/axios" target="_blank" rel="noopener noreferrer">axios</a> to send requests.</p></div><div class="language-ts"><pre><code><span class="token comment">// login</span>
auth<span class="token punctuation">.</span><span class="token function">$login</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token comment">// ...AxiosRequestConfig</span>
  data<span class="token operator">:</span> <span class="token punctuation">{</span>
    email<span class="token operator">:</span> <span class="token string">&quot;jfoi2323njf@duck.com&quot;</span><span class="token punctuation">,</span>
    password<span class="token operator">:</span> <span class="token string">&quot;cmoiu9012A0[]=ee&quot;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h4 id="_2-control-requests-and-responses" tabindex="-1">2. Control requests and responses. <a class="header-anchor" href="#_2-control-requests-and-responses" aria-hidden="true">#</a></h4><p>I need a way to make sure our token is sent with each request if set. Likewise I also need to sniff out any new token in the response from our API during login or impersonate requests. Any descent existing plugin should already support this and allow us to easily create these intercepts.</p><div class="info custom-block"><p class="custom-block-title">INFO</p><p>These intercepts are directly fed into the auth drivers. So for instance a response intercept gets triggered which then calls the <code>response</code> auth driver function. Same applies to requests.</p></div><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>Although using axios, its only effect is to send requests. I don&#39;t inject code in it so you can easily replace it with <code>fetch</code></p></div><h4 id="available-drivers-1" tabindex="-1">Available Drivers: <a class="header-anchor" href="#available-drivers-1" aria-hidden="true">#</a></h4><ul><li><a href="hthttps://github.com/tachibana-shin/vue-auth3/blob/master/src/drivers/http/axios.ts">axios.ts</a></li></ul><h2 id="router-drivers-deleted" tabindex="-1">Router Drivers [Deleted!] <a class="header-anchor" href="#router-drivers-deleted" aria-hidden="true">#</a></h2><div class="danger custom-block"><p class="custom-block-title">WARNING</p><p>Router drivers are no longer needed. Now you just need to add <code>plugins: { router }</code></p></div><h2 id="oauth2-drivers" tabindex="-1">OAuth2 Drivers <a class="header-anchor" href="#oauth2-drivers" aria-hidden="true">#</a></h2><p>These drivers are used to make an OAuth2 request to their respective services.</p><p>To customize these requires only setting a url and default OAuth2 parameters.</p><h4 id="available-drivers-2" tabindex="-1">Available Drivers: <a class="header-anchor" href="#available-drivers-2" aria-hidden="true">#</a></h4><ul><li><a href="https://github.com/tachibana-shin/vue-auth3/blob/master/src/drivers/oauth2/facebook.ts" target="_blank" rel="noopener noreferrer">facebook.ts</a></li><li><a href="https://github.com/tachibana-shin/vue-auth3/blob/master/src/drivers/oauth2/google.ts" target="_blank" rel="noopener noreferrer">google.ts</a></li></ul><h2 id="custom-drivers" tabindex="-1">Custom Drivers <a class="header-anchor" href="#custom-drivers" aria-hidden="true">#</a></h2><p>The best way to customize a driver is to simply look at the source code on GitHub of one of the existing ones. From there an existing one can be copied and modified to suit particular needs for the application.</p><p>The drivers will heavily integrate with the particular plugin they interact with. For instance if using the <code>fetch</code> plugin it will directly affect the <code>http</code> and <code>auth</code> drivers. For this reason, I will not go into specific details on how to customize each driver.</p><p>However if you know typescript you can create a driver easily</p><ul><li><a href="https://github.com/tachibana-shin/vue-auth3/blob/master/src/type/drivers/AuthDriver.ts" target="_blank" rel="noopener noreferrer">Auth Driver Types</a></li><li><a href="https://github.com/tachibana-shin/vue-auth3/blob/master/src/type/drivers/HttpDriver.ts" target="_blank" rel="noopener noreferrer">HTTP Driver Types</a></li><li><a href="https://github.com/tachibana-shin/vue-auth3/blob/master/src/type/drivers/OAuth2Driver.ts" target="_blank" rel="noopener noreferrer">OAuth2 Driver Types</a></li></ul>`,36),o=[r];function i(p,c,l,u,d,h){return a(),t("div",null,o)}var m=e(n,[["render",i]]);export{k as __pageData,m as default};
